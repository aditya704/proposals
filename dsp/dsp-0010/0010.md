<pre>
  DSP: 0010
  Title: LAND contract
  Author: Ignacio Mazzara <nacho@decentraland.org>
  Status: Draft
  Type: Standards
  Created: 2019-03-11
</pre>

# LAND contract

## Table of Contents

- [Introduction](#introduction)
- [Abstract](#abstract)
- [Terminology](#terminology)
- [Estates](#estates)
- [Design](#design)
- [Specification](#specification)
  - [Events](#specification)
  - [Functions](#functions)
    - [Authorizations](#authorizations)
    - [Transfers](#transfers)
    - [Utils](#utils)

## Introduction

Every parcel in Decentraland's world is represented by a non-fungible token ERC #721 that is indivisible and unique. This registry is powered by a smart contract where it is defined all the information related to each parcel.

## Abstract

This document describes the functionality provided by the LAND contract also known as LANDRegistry contract.

The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in [RFC 8174](https://tools.ietf.org/html/rfc8174) when, and only when, they appear in all capitals, as shown here.

## Terminology

**Parcel**:  
 The logical unit of land subdivision in the Decentraland's world. Each parcel may contains metadata formerly used to save its content.

**LAND**:  
 Technical name for parcels

**Estate**:  
 Group of parcels placed together

## Design

This contract was created using a [proxy pattern](https://blog.zeppelinos.org/proxy-patterns/) which allows upgradability.

## Specification

### Events

```
EstateRegistrySet(address registry)
```

```
Update(
  uint256 assetId,
  address holder,
  address operator,
  string data
)
```

```
UpdateOperator(uint256 assetId, address operator)
```

```
Transfer(
  address from,
  address to,
  uint256 assetId,
  address operator,
  bytes userData
)
```

```
Transfer(address from, address to, uint256 assetId)
```

```
ApprovalForAll(address operator, address holder, bool authorized)
```

```
Approval(address owner, address operator, uint256 assetId)
```

```
OwnerUpdate(address _prevOwner, address _newOwner)
```

### Functions

#### Authorizations

```
approve(address operator, uint256 assetId)
```

```
authorizeDeploy(address beneficiary)
```

```
setApprovalForAll(address operator, bool authorized)
```

```
setUpdateOperator(uint256 assetId, address operator)
```

```
getApproved(uint256 assetId)
```

```
isApprovedForAll(address assetHolder, address operator)
```

```
getApprovedAddress(uint256 assetId)
```

```
updateOperator(uint256 operator)
```

```
isAuthorized(address operator, uint256 assetId)
```

```
isUpdateAuthorized(address operator, uint256 assetId)
```

#### Transfers

```
transferFrom(address from, address to, uint256 assetId)
```

```
transferLand(int256 x, int256 y, address to)
```

```
safeTransferFrom(address from, address to, uint256 assetId)
```

```
transferManyLand(int256[] x, int256[] y, address to)
```

```
safeTransferFrom(
  address from,
  address to,
  uint256 assetId,
  bytes userData
)
```

```
transferOwnership(address _newOwner)
```

```
transferManyLandToEstate(int256[] x, int256[] y, uint256 estateId)
```

```
transferLandToEstate(int256 x, int256 y, uint256 estateId)
```

#### Creations

```
assignNewParcel(int256 x, int256 y, address beneficiary)
```

```
assignMultipleParcels(int256[] x, int256[] y, address beneficiary)
```

```
createEstateWithMetadata(
  int256[] x,
  int256[] y,
  address beneficiary,
  string metadata
)
```

```
createEstate(int256[] x, int256[] y, address beneficiary)
```

#### Updates

```
updateLandData(int256 x, int256 y, string data)
```

```
updateManyLandData( int256[] x, int256[] y, string data)
```

#### Utils

```
encodeTokenId(int256 x, int256 y)
```

```
decodeTokenId(uint256 value)
```

```
landOf( address owner)
```

```
forbidDeploy(address beneficiary)
```

```
setLatestToNow(address user)
```

```
setEstateRegistry(address registry)
```

```
ownerOfLandMany(int256[] x, int256[] y)
```

```
exists(int256 x, int256 y)
```

```
supportsInterface(bytes4 _interfaceID)
```

```
proxyOwner()
```

```
name()
```

```
ownerOfLand(int256 x, int256 y)
```

```
tokenOfOwnerByIndex( address owner, uint256 index)
```

```
totalSupply()
```

```
latestPing(address)
```

```
authorizedDeploy(adderss operator)
```

```
decimals()
```

```
landData(int256 x, int256 y)
```

```
exists(uint256 assetId)
```

```
tokensOf( address owner)
```

```
ownerOf(uint256 assetId)
```

```
tokenMetadata(uint256 assetId)
```

```
balanceOf(address owner)
```

```
currentContract()
```

```
description()
```

```
owner()
```

```
symbol()
```

```
estateRegistry
```

```
GET_METADATA()
```
